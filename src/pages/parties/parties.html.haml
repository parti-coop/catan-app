%ion-header
  %ion-navbar
    .parti-header
      %ion-title {{partiEnvironment.appTitle}}
      .search-btn
        %button{ 'ion-button': true }
          %ion-icon{ name: 'search' }
  .parti-toolbar
    %ion-toolbar{ 'no-border': true }
      %ion-segment{ '[(ngModel)]': 'selection' }
        %ion-segment-button{ value: 'joined' }
          내 빠띠
        %ion-segment-button{ value: 'all' }
          전체 빠띠
%ion-content
  %div.full{ '[hidden]': "selection !== 'joined'" }
    %ion-scroll.full{ scrollY: 'true' }
      .select-tag-or-group-panel
        %p 내 그룹
        .groups
          .group 나는 알아야겠당
          .group 세상을 바꾸는 꿈 - 바꿈
      .parti-list
        %ion-list
          %ion-item-group
            %template{'[ngIf]': '!parties["joinedOnly"]'}
              %ion-item{ 'text-center': true }
                %ion-spinner
            %template{'[ngIf]': '!!parties["joinedOnly"]'}
              %ion-item{ '*ngFor': 'let parti of parties["joinedOnly"]', '(click)': 'onClickParti(parti)' }
                .parti-item
                  .parti-logo{ '[ngStyle]': "{ 'background-image': 'url(' + parti.logo_url + ')' }" }
                  .parti-body
                    .parti-title {{ parti.title }}
                    .parti-info
                      .parti-info--new-post{ '*ngIf': "parti.latest_posts_count !== 0"}
                        .parti-info--new-post__icon N
                        .parti-info--new-post__number {{ parti.latest_posts_count }}
                      .parti-info--new-member{ '*ngIf': "parti.latest_members_count !== 0"}
                        .parti-info--new-member__icon
                          %ion-icon{ name: 'person' }
                        .parti-info--new-member__number {{ parti.latest_members_count }}
                      .parti-info--date{ '*ngIf': "parti.latest_posts_count + parti.latest_members_count === 0"}
                        {{ parti.updated_at | partiDateTimeFormatObservable | async }}
          %ion-item-group
            %template{'[ngIf]': '!parties["making"]'}
              %ion-item{ 'text-center': true }
                %ion-spinner
            %template{'[ngIf]': '!!parties["making"]'}
              %ion-item{ '*ngFor': 'let parti of parties["making"]', '(click)': 'onClickParti(parti)' }
                .parti-item
                  .parti-logo{ '[ngStyle]': "{ 'background-image': 'url(' + parti.logo_url + ')' }" }
                  .parti-body
                    .parti-title {{ parti.title }}
                    .parti-info
                      .parti-info--new-post{ '*ngIf': "parti.latest_posts_count !== 0"}
                        .parti-info--new-post__icon N
                        .parti-info--new-post__number {{ parti.latest_posts_count }}
                      .parti-info--new-member{ '*ngIf': "parti.latest_members_count !== 0"}
                        .parti-info--new-member__icon
                          %ion-icon{ name: 'person' }
                        .parti-info--new-member__number {{ parti.latest_members_count }}
                      .parti-info--date{ '*ngIf': "parti.latest_posts_count + parti.latest_members_count === 0"}
                        {{ parti.updated_at | partiDateTimeFormatObservable | async }}
      .parti-make-panel
        %p 관심있는 이슈가 없다면, 직접 만들어보세요
        .parti-make-btn{ '(click)': 'onClickPartiMakeBtn()' }
          빠띠 만들기
  %div.full{ '[hidden]': "selection !== 'all'" }
    %ion-scroll.full{ scrollY: 'true' }
      .select-tag-or-group-panel
        %p 관심있는 태그를 선택해 보세요
        .tags
          .tag #우주당
          .tag #기본소득
          .tag #정치
          .tag #노동
      .parti-list
        %ion-list
          %template{'[ngIf]': '!parties["all"]'}
            %ion-item{ 'text-center': true }
              %ion-spinner
          %template{'[ngIf]': '!!parties["all"]'}
            %ion-item{ '*ngFor': 'let parti of parties["all"]', '(click)': 'onClickParti(parti)' }
              .parti-item
                .parti-logo{ '[ngStyle]': "{ 'background-image': 'url(' + parti.logo_url + ')' }" }
                .parti-body
                  .parti-title {{ parti.title }}
                  .parti-info
                    .parti-info--members
                      멤버 {{ parti.members_count }}명
                    .parti-info--posts
                      게시글 {{ parti.posts_count }}개
                %template{ '[ngIf]': '!parti.is_member' }
                  .parti-join-btn
                    %button{ 'ion-button': true }
                      가입
                %template{ '[ngIf]': 'parti.is_member && !parti.is_made_by' }
                  .parti-joined-btn
                    %ion-icon{ name: 'checkmark' }
                %template{ '[ngIf]': 'parti.is_made_by' }

